(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){e.exports=a(56)},44:function(e,t,a){},52:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(29),l=a.n(c),o=(a(44),a(7)),m=a(11),s=a(12),i=a(18),u=a(15),d=a(17),E=a(0),b=a(10),p=a(6),h=a(13),g=a(28),f=function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())},v=function(){if("undefined"===typeof window)return!1;if(localStorage.getItem("jwt")){var e=Object(g.a)(JSON.parse(localStorage.getItem("jwt"))).exp;return(new Date).getTime()<1e3*e||(localStorage.removeItem("jwt"),!1)}return!1},N=function(){var e=JSON.parse(localStorage.getItem("jwt")),t=Object(g.a)(e);return Object(b.a)({},t,{token:e})},y=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).navToggler=function(){a.setState({isNavOpen:!a.state.isNavOpen})},a.state={isNavOpen:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(h.h,{dark:!0,color:"dark",expand:"sm"},r.a.createElement(h.i,{href:"/"},"Ecommerce Website"),r.a.createElement(h.j,{onClick:this.navToggler}),r.a.createElement(h.c,{isOpen:this.state.isNavOpen,navbar:!0},r.a.createElement(h.f,{className:"mr-auto",navbar:!0},r.a.createElement(h.g,null,r.a.createElement(o.b,{to:"/",className:"nav-link active"}," Home")),!v()&&r.a.createElement(r.a.Fragment,null,r.a.createElement(h.g,null,r.a.createElement(o.b,{to:"/login",className:"nav-link"}," Login")),r.a.createElement(h.g,null,r.a.createElement(o.b,{to:"/register",className:"nav-link"}," Register"))),v()&&r.a.createElement(r.a.Fragment,null,r.a.createElement(h.g,null,r.a.createElement(o.b,{to:"/logout",className:"nav-link",onClick:function(){"undefined"!==typeof window&&localStorage.removeItem("jwt")}},"Logout")),r.a.createElement(h.g,null,r.a.createElement(o.b,{to:"/user/dashboard",className:"nav-link"},"User Dashboard"))),v()&&"admin"===N().role&&r.a.createElement(r.a.Fragment,null,r.a.createElement(h.g,null,r.a.createElement(o.b,{to:"/admin/dashboard",className:"nav-link"},"Admin Dashboard")))))))}}]),t}(n.Component),O=function(e){var t=e.title,a=void 0===t?"Title":t,c=e.className,l=e.children;return Object(n.useEffect)(function(){document.title=a},[]),r.a.createElement("div",null,r.a.createElement("div",{className:"mb-3"},r.a.createElement(y,null)),r.a.createElement("div",{className:c},r.a.createElement("div",null,l)))},j="https://ecommerceapi.freelancebangla.com/api",w=a(64),C=function(e,t){return w.a.post("".concat(j,"/cart"),t,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})},S=function(e){return w.a.get("".concat(j,"/cart"),{headers:{Authorization:"Bearer ".concat(e)}})},k=function(e,t){return w.a.put("".concat(j,"/cart"),t,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})},x=function(e){return w.a.get("".concat(j,"/profile"),{headers:{Authorization:"Bearer ".concat(e)}})},F=function(e,t){if(e)return r.a.createElement("div",{className:"alert alert-danger"},t)},P=function(e,t){if(e)return r.a.createElement("div",{className:"alert alert-success"},t)},A=function(e){if(e)return r.a.createElement("div",{className:"alert alert-info"},"Loading.....")},q=a(14),I=function(e){var t=e.categories,a=e.handleFilters,c=Object(n.useState)([]),l=Object(p.a)(c,2),o=l[0],m=l[1],s=Object(q.a)(o);return t.map(function(e){return r.a.createElement("li",{className:"list-unstyled",key:e._id},r.a.createElement("input",{type:"checkbox",className:"form-check-input",onChange:(t=e._id,function(){var e=o.indexOf(t);-1===e?s.push(t):s.splice(e,1),m(s),a(s)}),value:-1===o.indexOf(e._id)}),r.a.createElement("label",{className:"form-check-label"},e.name));var t})},D=function(e){var t=e.prices,a=e.handleFilters,n=function(e){a(e.target.value)};return t.map(function(e){return r.a.createElement("div",{key:e.id,className:"col-6"},r.a.createElement("input",{onChange:n,value:e.id,name:"price_filter",type:"radio",className:"mr-2"}),r.a.createElement("label",{className:"form-check-label mr-4"},e.name))})},T=[{id:0,name:"Any",arr:[]},{id:1,name:"0 to 1000",arr:[0,1e3]},{id:2,name:"1000 to 2000",arr:[1e3,2e3]},{id:3,name:"2000 to 3000",arr:[2e3,3e3]},{id:4,name:"3000 to 4000",arr:[3e3,4e3]},{id:5,name:"More than 4000",arr:[4e3,1e5]}],_=function(e){var t=e.product,a=e.handleAddToCart;return r.a.createElement("div",{className:"col-md-3 col-sm-4 col-xs-12"},r.a.createElement("div",{className:"card"},r.a.createElement("img",{src:"".concat(j,"/product/photo/").concat(t._id),alt:t.name,style:{height:250,objectFit:"cover",objectPosition:"0px 0px"},className:"card-img-top"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{style:{minHeight:"3em"}},r.a.createElement("p",{style:{display:"block",textOverflow:"ellipsis",wordWrap:"break-word",overflow:"hidden",maxHeight:"2em",lineHeight:"1em"}},t.name)),r.a.createElement("span",{style:{fontSize:20}},"\u09f3"),t.price,r.a.createElement("p",null,t.quantity?r.a.createElement("span",{class:"badge badge-primary text-primary"},"In Stock"):r.a.createElement("span",{class:"badge badge-pill badge-danger text-danger"},"Out of Stock")),r.a.createElement(o.b,{to:"/product/".concat(t._id)},r.a.createElement("button",{className:"btn btn-outline-warning btn-sm"},"View Product")),t.quantity?r.a.createElement(r.a.Fragment,null,"\xa0",r.a.createElement("button",{className:"btn btn-outline-primary btn-sm",onClick:a},"Add to Cart")):"")))},L=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(p.a)(l,2),m=o[0],s=o[1],i=Object(n.useState)(!1),u=Object(p.a)(i,2),d=u[0],E=u[1],h=Object(n.useState)(30),g=Object(p.a)(h,2),f=g[0],y=(g[1],Object(n.useState)(0)),S=Object(p.a)(y,2),k=S[0],x=(S[1],Object(n.useState)("asc")),A=Object(p.a)(x,2),q=A[0],L=(A[1],Object(n.useState)("price")),B=Object(p.a)(L,2),H=B[0],z=(B[1],Object(n.useState)([])),U=Object(p.a)(z,2),R=U[0],J=U[1],G=Object(n.useState)({category:[],price:[]}),M=Object(p.a)(G,2),Q=M[0],W=M[1];Object(n.useEffect)(function(){(function(e,t,a){return w.a.get("".concat(j,"/product?sortBy=").concat(e,"&order=").concat(t,"&limit=").concat(a))})(H,q,f).then(function(e){return c(e.data)}).catch(function(e){return s("Failed to load products")}),w.a.get("".concat(j,"/category")).then(function(e){return J(e.data)}).catch(function(e){return s("Failed to load categories!")})},[]);var V=function(e){return function(){if(v()){s(!1),E(!1);var t=N(),a={user:t._id,product:e._id,price:e.price};C(t.token,a).then(function(e){return E(!0)}).catch(function(e){e.response?s(e.response.data):s("Adding to Cart failed")})}else E(!1),s("Please Login First")}},Y=function(e,t){var a=Object(b.a)({},Q);if("category"===t&&(a[t]=e),"price"===t){var n=T,r=[];for(var l in n)n[l].id===parseInt(e)&&(r=n[l].arr);a[t]=r}W(a),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={order:arguments.length>3?arguments[3]:void 0,sortBy:arguments.length>4?arguments[4]:void 0,limit:t,skip:e,filters:Object(b.a)({},a)};return w.a.post("".concat(j,"/product/filter"),n,{headers:{"Content-Type":"application/json"}})}(k,f,a,q,H).then(function(e){return c(e.data)}).catch(function(e){return s("Failed to load products")})};return r.a.createElement("div",null,v()&&r.a.createElement(O,{title:"Home Page",className:"container"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("h5",null,"Filter by Category:"),r.a.createElement("ul",null,r.a.createElement(I,{categories:R,handleFilters:function(e){return Y(e,"category")}})),JSON.stringify(Q)),r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("h5",null,"Filter By Price"),r.a.createElement("div",{className:"row"},r.a.createElement(D,{prices:T,handleFilters:function(e){return Y(e,"price")}}))))),r.a.createElement("div",{style:{width:"100%"}},F(m,m),P(d,"added to cart successfully now!")),r.a.createElement("div",{className:"row"},a&&a.map(function(e){return r.a.createElement(_,{product:e,key:e._id,handleAddToCart:V(e)})}))),!v()&&r.a.createElement(O,{title:"Home Page",className:"container"},"Please Login or SignUp"))},B=a(9),H=function(e){return w.a.post("".concat(j,"/user/signin"),e,{headers:{"Content-Type":"application/json"}})},z=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={email:"",password:"",error:!1,loading:!1,disabled:!1,redirect:!1,success:!1},a.handleChange=function(e){a.setState(Object(B.a)({error:!1},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.setState({error:!1,loading:!0,disabled:!0});var t=a.state.email,n=a.state.password;H({email:t,password:n}).then(function(e){f(e.data.token,function(){a.setState({email:"",password:"",success:!0,disabled:!1,loading:!1,redirect:!0,error:!1})})}).catch(function(e){var t="Something went wrong";e.response&&(t=e.response.data),a.setState({error:t,disabled:!1,loading:!1})})},a.redirectUser=function(){if(a.state.redirect)return r.a.createElement(E.a,{to:"/"})},a.signInForm=function(){return r.a.createElement("form",{onSubmit:a.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email:"),r.a.createElement("input",{name:"email",type:"email",className:"form-control",value:a.state.email,required:!0,onChange:a.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password:"),r.a.createElement("input",{name:"password",type:"password",className:"form-control",value:a.state.redirectpassword,required:!0,onChange:a.handleChange})),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary",disabled:a.state.disabled},"Login"))},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(O,{title:"Login",className:"container col-md-8 offset-md-2"},this.redirectUser(),A(this.state.loading),F(this.state.error,this.state.error),r.a.createElement("h3",null,"Login Here,"),r.a.createElement("hr",null),this.signInForm(),r.a.createElement("hr",null))}}]),t}(n.Component),U=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:!1,loading:!1,disabled:!1,success:!1}),t=Object(p.a)(e,2),a=t[0],c=t[1],l=a.name,m=a.email,s=a.password,i=a.success,u=a.error,d=a.loading,E=a.disabled,h=function(e){c(Object(b.a)({},a,Object(B.a)({error:!1},e.target.name,e.target.value)))},g=function(e){var t;e.preventDefault(),c(Object(b.a)({},a,{error:!1,loading:!0,disabled:!0})),(t={name:l,email:m,password:s},w.a.post("".concat(j,"/user/signup"),t,{headers:{"Content-Type":"application/json"}})).then(function(e){c({name:"",email:"",password:"",success:!0,disabled:!1,loading:!1})}).catch(function(e){var t="Something went wrong";e.response&&(t=e.response.data),c(Object(b.a)({},a,{error:t,disabled:!1,loading:!1}))})};return r.a.createElement(O,{title:"Register",className:"container col-md-8 offset-md-2"},function(){if(i)return r.a.createElement("div",{className:"alert alert-primary"},"New account Created. Please ",r.a.createElement(o.b,{to:"/login"},"Login"))}(),A(d),F(u,u),r.a.createElement("h3",null,"Register Here,"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:g},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name:"),r.a.createElement("input",{type:"text",name:"name",className:"form-control",value:l,required:!0,onChange:h})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email:"),r.a.createElement("input",{type:"email",name:"email",className:"form-control",value:m,required:!0,onChange:h})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password:"),r.a.createElement("input",{type:"password",name:"password",className:"form-control",value:s,required:!0,onChange:h})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:E},"Create Account")),r.a.createElement("hr",null))},R=function(){var e=N(),t=e.name,a=e.email,n=e.role;return r.a.createElement(O,{title:"Dashboard",className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header"},"User Links"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(o.b,{className:"nav-link",to:"/user/cart"},"My Cart")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(o.b,{className:"nav-link",to:"#"},"Update Profile"))))),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(function(){return r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header"},"User Information"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},t),r.a.createElement("li",{className:"list-group-item"},a),r.a.createElement("li",{className:"list-group-item"},n)))},null),r.a.createElement(function(){return r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header"},"Purchase History"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},"History")))},null))))},J=function(){var e=N(),t=e.name,a=e.email,n=e.role;return r.a.createElement("div",null,r.a.createElement(O,{title:"Dashboard",className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement(h.a,null,r.a.createElement(h.b,null,r.a.createElement("h4",null,"User Links")),r.a.createElement(h.d,{flush:!0},r.a.createElement(h.e,null,r.a.createElement(o.b,{to:"/admin/create/category",className:"nav-link"}," Create Category")),r.a.createElement(h.e,null,r.a.createElement(o.b,{className:"nav-link",to:"/admin/create/product"},"Create Product"))))),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header"},"User Information"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},t),r.a.createElement("li",{className:"list-group-item"},a),r.a.createElement("li",{className:"list-group-item"},n)))))))},G=function(){var e=Object(n.useState)({name:"",error:!1,success:!1,loading:!1}),t=Object(p.a)(e,2),a=t[0],c=t[1],l=a.name,m=a.error,s=a.success,i=a.loading,u=function(e){e.preventDefault(),c(Object(b.a)({},a,{loading:!0,error:!1,success:!1})),function(e,t){return w.a.post("".concat(j,"/category"),t,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})}(N().token,{name:l}).then(function(e){c(Object(b.a)({},a,{error:!1,success:!0,loading:!1}))}).catch(function(e){e.response?(c(Object(b.a)({},a,{success:!1,error:e.response.data,loading:!1})),console.log(" err.res here")):(console.log("here"),c(Object(b.a)({},a,{success:!1,error:"Something went wrong",loading:!1})))})},d=function(e){var t;c(Object(b.a)({},a,(t={},Object(B.a)(t,e.target.name,e.target.value),Object(B.a)(t,"error",!1),t)))};return r.a.createElement(O,{title:"Add a new category",description:"Ready to add a new category?"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},A(i),F(m,m),P(s,"Category Created!"),r.a.createElement("form",{onSubmit:u},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{name:"name",type:"text",onChange:d,value:l,autoFocus:!0,required:!0,className:"form-control"})),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary"},"Create Category")),r.a.createElement("div",{className:"mt-5"},r.a.createElement(o.b,{to:"/admin/dashboard",className:"text-warning"},"Go to Dashboard")))))},M=function(){var e=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",quantity:"",loading:!1,error:!1,success:!1,disabled:!1,formData:""}),t=Object(p.a)(e,2),a=t[0],c=t[1],l=a.name,m=a.description,s=a.price,i=a.category,u=a.categories,d=a.quantity,E=a.loading,h=a.error,g=a.success,f=a.formData,v=a.disabled;Object(n.useEffect)(function(){w.a.get("".concat(j,"/category")).then(function(e){c(Object(b.a)({},a,{categories:e.data,formData:new FormData}))}).catch(function(e){c(Object(b.a)({},a,{error:"Failed to load categories",formData:new FormData}))})},[]);var y=function(e){var t,n="photo"===e.target.name?e.target.files[0]:e.target.value;f.set(e.target.name,n),c(Object(b.a)({},a,(t={},Object(B.a)(t,e.target.name,n),Object(B.a)(t,"error",!1),Object(B.a)(t,"success",!1),t)))},C=function(e){e.preventDefault(),c(Object(b.a)({},a,{error:!1,loading:!0,disabled:!0,success:!1})),function(e,t){return console.log(t),w.a.post("".concat(j,"/product"),t,{headers:{Authorization:"Bearer ".concat(e)}})}(N().token,f).then(function(e){c(Object(b.a)({},a,{name:"",description:"",price:"",category:"",quantity:"",loading:!1,disabled:!1,success:!0,error:!1}))}).catch(function(e){var t="Something went wrong";e.response&&(t=e.response.data),c(Object(b.a)({},a,{error:t,loading:!1,success:!1,disabled:!1}))})};return r.a.createElement(O,{title:"Add a new product"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},F(h,h),A(E),P(g,"Product Added Successfully!"),r.a.createElement("form",{className:"mb-3",onSubmit:C},r.a.createElement("h4",null,"Photo:"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"btn btn-secondary"},r.a.createElement("input",{type:"file",name:"photo",onChange:y,accept:"image/*",required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name:"),r.a.createElement("input",{name:"name",onChange:y,type:"text",className:"form-control",value:l,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Description:"),r.a.createElement("textarea",{name:"description",onChange:y,className:"form-control",value:m,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Price:"),r.a.createElement("input",{name:"price",onChange:y,className:"form-control",type:"number",value:s,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Quantity:"),r.a.createElement("input",{name:"quantity",onChange:y,className:"form-control",type:"number",value:d,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Category:"),r.a.createElement("select",{name:"category",value:i,onChange:y,className:"form-control",required:!0},r.a.createElement("option",{value:""},"choose a category"),u&&u.map(function(e){return r.a.createElement("option",{value:e._id,key:e._id},e.name)}))),r.a.createElement("button",{className:"btn btn-outline-primary",type:"submit",disabled:v},"Create Product")),r.a.createElement("div",{className:"mt-5"},r.a.createElement(o.b,{to:"/admin/dashboard",className:"text-warning"},"Go to Dashboard")))))},Q=function(e){var t=Object(n.useState)({}),a=Object(p.a)(t,2),c=a[0],l=a[1],m=Object(n.useState)(!1),s=Object(p.a)(m,2),i=s[0],u=s[1],d=Object(n.useState)(!1),b=Object(p.a)(d,2),h=b[0],g=b[1],f=Object(E.o)().id;Object(n.useEffect)(function(){(function(e){return w.a.get("".concat(j,"/product/").concat(e))})(f).then(function(e){return l(e.data)}).catch(function(e){return u("Failed to load products")})},[]);return r.a.createElement(O,{title:"Product Page"},r.a.createElement("nav",{"aria-label":"breadcrumb"},r.a.createElement("ol",{class:"breadcrumb"},r.a.createElement("li",{class:"breadcrumb-item"},r.a.createElement(o.b,{to:"/"},"Home")),r.a.createElement("li",{class:"breadcrumb-item"},r.a.createElement(o.b,{to:"/product"},"Product")),r.a.createElement("li",{class:"breadcrumb-item active","aria-current":"page"},c.category?c.category.name:""))),r.a.createElement("div",null,P(h,"Item Added to Cart!"),F(i,i)),r.a.createElement("div",{className:"row container"},r.a.createElement("div",{className:"col-6"},r.a.createElement("img",{src:"".concat(j,"/product/photo/").concat(c._id),alt:c.name,width:"100%"})),r.a.createElement("div",{className:"col-6"},r.a.createElement("h3",null,c.name),r.a.createElement("span",{style:{fontSize:20}},"\u09f3"),c.price,r.a.createElement("p",null,c.quantity?r.a.createElement("span",{class:"badge badge-pill badge-primary text-primary"},"In Stock"):r.a.createElement("span",{class:"badge badge-pill badge-danger"},"Out of Stock")),r.a.createElement("p",null,c.description),c.quantity?r.a.createElement(r.a.Fragment,null,"\xa0",r.a.createElement("button",{className:"btn btn-outline-primary btn-md",onClick:function(e){return function(){if(v()){u(!1),g(!1);var t=N(),a={user:t._id,product:e._id,price:e.price};C(t.token,a).then(function(e){return g(!0)}).catch(function(e){e.response?u(e.response.data):u("Adding to Cart failed")})}else g(!1),u("Please Login First")}}(c)},"Add to Cart")):"")))},W=function(){var e=Object(n.useState)({phone:"",address1:"",address2:"",city:"",postcode:"",country:""}),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),m=Object(p.a)(l,2),s=m[0],i=m[1],u=Object(n.useState)(!1),d=Object(p.a)(u,2),h=d[0],g=d[1],f=a.phone,v=a.address1,y=a.address2,C=a.city,S=a.postcode,k=a.country;Object(n.useEffect)(function(){x(N().token).then(function(e){return c(e.data)}).catch(function(e){})},[]);var F=function(e){c(Object(b.a)({},a,Object(B.a)({},e.target.name,e.target.value)))},P=function(e){var t,n;e.preventDefault(),i(!0),console.log("200"),(t=N().token,n=a,w.a.post("".concat(j,"/profile"),n,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})).then(function(e){200===e.status&&g(!0)}).catch(function(e){return i(!1)})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{title:"Checkout",description:"Complete your order!",className:"container"},function(){if(h)return console.log("here"),r.a.createElement(E.a,{to:"/user/checkout"})}(),r.a.createElement("nav",{"aria-label":"breadcrumb"},r.a.createElement("ol",{class:"breadcrumb"},r.a.createElement("li",{class:"breadcrumb-item"},r.a.createElement(o.b,null,"Order")),r.a.createElement("li",{class:"breadcrumb-item"},r.a.createElement(o.b,{to:"/user/cart"},"Cart")),r.a.createElement("li",{class:"breadcrumb-item active","aria-current":"page"},"Shipping Address"))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card mb-5",style:{height:"auto"}},r.a.createElement("div",{className:"card-header"},"Shipping Address"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:P},r.a.createElement("label",{className:"text-muted"},"Phone:"),r.a.createElement("input",{name:"phone",value:f,required:!0,className:"form-control",onChange:F}),r.a.createElement("label",{className:"text-muted"},"Address 1:"),r.a.createElement("input",{name:"address1",value:v,required:!0,className:"form-control",onChange:F}),r.a.createElement("label",{className:"text-muted"},"Address 2:"),r.a.createElement("input",{name:"address2",value:y,className:"form-control",onChange:F}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},r.a.createElement("label",{className:"text-muted"},"City:"),r.a.createElement("input",{name:"city",value:C,required:!0,className:"form-control",onChange:F})),r.a.createElement("div",{className:"col-4"},r.a.createElement("label",{className:"text-muted"},"Post Code: "),r.a.createElement("input",{name:"postcode",value:S,type:"number",required:!0,className:"form-control",onChange:F})),r.a.createElement("div",{className:"col-4"},r.a.createElement("label",{className:"text-muted"},"Country:"),r.a.createElement("input",{name:"country",value:k,required:!0,className:"form-control",onChange:F}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-sm float-right",disabled:s},"Save and Checkout")))))))))))},V=function(e){var t=e.item,a=e.serial,n=e.increaseItem,c=e.decreaseItem,l=e.removeItem;return r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},a),r.a.createElement("th",null,r.a.createElement("img",{src:"".concat(j,"/product/photo/").concat(t.product._id),alt:t.product.name,width:"30px"})),r.a.createElement("td",null,t.product?t.product.name:""),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-outline-primary btn-sm",onClick:c},"-"),"\xa0\xa0",t.count,"\xa0\xa0",r.a.createElement("button",{className:"btn btn-outline-primary btn-sm",onClick:n},"+")),r.a.createElement("td",{align:"right"},"\u09f3 ",t.price*t.count,"  "),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:l},"Remove From Cart")))},Y=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1],l=function(){S(N().token).then(function(e){return c(e.data)}).catch(function(){})};Object(n.useEffect)(function(){l()},[]);var m=function(e){return function(){if(5!==e.count){var t=Object(b.a)({},e,{count:e.count+1});k(N().token,t).then(function(e){return l()}).catch(function(e){})}}},s=function(e){return function(){if(1!==e.count){var t=Object(b.a)({},e,{count:e.count-1});k(N().token,t).then(function(e){return l()}).catch(function(e){})}}},i=function(e){return function(){var t,a;window.confirm("Delete Item?")&&(t=N().token,a=e,w.a.delete("".concat(j,"/cart/").concat(a._id),{headers:{Authorization:"Bearer ".concat(t)}})).then(function(e){l()}).catch(function(){})}};return r.a.createElement(O,{title:"Your Cart",description:"Hurry up! Place your order!",className:"container"},r.a.createElement("nav",{"aria-label":"breadcrumb"},r.a.createElement("ol",{class:"breadcrumb"},r.a.createElement("li",{class:"breadcrumb-item"},"Order"),r.a.createElement("li",{class:"breadcrumb-item active","aria-current":"page"},"Cart"))),r.a.createElement("div",{className:"container my-5"},r.a.createElement("table",{className:"table table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",width:"15%"},"#"),r.a.createElement("th",{scope:"col"},"Image"),r.a.createElement("th",{scope:"col"},"Product Name"),r.a.createElement("th",{scope:"col"},"Quantity"),r.a.createElement("th",{scope:"col",align:"right"},"Price"),r.a.createElement("th",{scop:"col"},"Remove"))),r.a.createElement("tbody",null,a.map(function(e,t){return r.a.createElement(V,{item:e,serial:t+1,key:e._id,increaseItem:m(e),decreaseItem:s(e),removeItem:i(e)})}),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"}),r.a.createElement("td",{colSpan:3},"Total"),r.a.createElement("td",{align:"right"},"\u09f3 ",a.map(function(e){return e.price*e.count}).reduce(function(e,t){return e+t},0)," "),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"}),r.a.createElement("td",{colSpan:5,className:"text-right"},r.a.createElement(o.b,{to:"/"},r.a.createElement("button",{className:"btn btn-warning mr-4"},"Continue Shoping")),r.a.createElement(o.b,{to:"/user/shipping",className:"btn btn-success mr-4"},"Proceed To Checkout")))))))},K=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)({phone:"",address1:"",address2:"",city:"",postcode:"",country:""}),m=Object(p.a)(l,2),s=m[0],i=m[1],u=s.phone,d=s.address1,E=s.address2,b=s.city,h=s.postcode,g=s.country;Object(n.useEffect)(function(){x(N().token).then(function(e){return i(e.data)}).catch(function(e){}),S(N().token).then(function(e){return c(e.data)}).catch(function(e){return console.log(e)})},[]);return d&&b&&u&&h&&g?r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{title:"Checkout",description:"Complete your order!",className:"container"},r.a.createElement("nav",{"aria-label":"breadcrumb"},r.a.createElement("ol",{class:"breadcrumb"},r.a.createElement("li",{class:"breadcrumb-item"},r.a.createElement(o.b,null,"Order")),r.a.createElement("li",{class:"breadcrumb-item"},r.a.createElement(o.b,{to:"/user/cart"},"Cart")),r.a.createElement("li",{class:"breadcrumb-item"},r.a.createElement(o.b,{to:"/user/shipping"},"Shipping Address")),r.a.createElement("li",{class:"breadcrumb-item active","aria-current":"page"},"Checkout"))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-7"},r.a.createElement("div",{className:"card mb-5",style:{height:"auto"}},r.a.createElement("div",{className:"card-header"},"Shipping Details"),r.a.createElement("div",{className:"card-body"},r.a.createElement(r.a.Fragment,null,"To,",r.a.createElement("br",null)," ",r.a.createElement("b",null,N().name),r.a.createElement("br",null)," Phone: ",u,r.a.createElement("br",null)," ",d,E?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),E):"",r.a.createElement("br",null)," ",b,"-",h,", ",g)))),r.a.createElement("div",{className:"col-md-5"},r.a.createElement("div",{className:"card",style:{height:"auto"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("ul",{className:"list-group list-group-flush"},a.map(function(e){return r.a.createElement("li",{key:e._id,className:"list-group-item",align:"right"},e.product?e.product.name:""," x ",e.count," = \u09f3 ",e.price*e.count," ")}))),r.a.createElement("div",{className:"card-footer"},r.a.createElement("span",{className:"float-left"},r.a.createElement("b",null,"Order Total")),r.a.createElement("span",{className:"float-right"},r.a.createElement("b",null,"\u09f3 ",a.map(function(e){return e.price*e.count}).reduce(function(e,t){return e+t},0))))),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement(o.b,{className:"btn btn-warning btn-md",to:"/user/payment"},"Make Payment"))))))):r.a.createElement(r.a.Fragment,null)},X=function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),m=Object(p.a)(l,2),s=m[0],i=m[1],u=Object(n.useState)(""),d=Object(p.a)(u,2),E=d[0],b=d[1];return Object(n.useEffect)(function(){var e;(e=N().token,w.a.get("".concat(j,"/payment"),{headers:{Authorization:"Bearer ".concat(e)}})).then(function(e){"SUCCESS"===e.data.status&&(c(!0),b(e.data.GatewayPageURL),i(!1))}).catch(function(e){i(!0),c(!1)})},[]),r.a.createElement("div",null,a?window.location=E:"Payment is processing...",s?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Failed to start payment session..."),r.a.createElement(o.b,{to:"/cart"},"Go to Cart")):"")},Z=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={auth:!1,role:""},a.useAuth=function(){if(a.setState({auth:v()}),v()){var e=N().role;a.setState({role:e})}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.useAuth(),r.a.createElement(E.d,null,r.a.createElement(E.b,{path:"/",element:r.a.createElement(L,null)}),r.a.createElement(E.b,{path:"/login",element:this.state.auth||v()?r.a.createElement(L,null):r.a.createElement(z,null)}),r.a.createElement(E.b,{path:"/register",element:this.state.auth||v()?r.a.createElement(L,null):r.a.createElement(U,null)}),r.a.createElement(E.b,{path:"/logout",element:r.a.createElement(E.a,{to:"/login"})}),r.a.createElement(E.b,{path:"/user/dashboard",element:this.state.auth||v()?r.a.createElement(R,null):r.a.createElement(E.a,{to:"/login"})}),r.a.createElement(E.b,{path:"/user/cart",element:this.state.auth||v()?r.a.createElement(Y,null):r.a.createElement(E.a,{to:"/login"})}),r.a.createElement(E.b,{path:"/user/shipping",element:this.state.auth||v()?r.a.createElement(W,null):r.a.createElement(E.a,{to:"/login"})}),r.a.createElement(E.b,{path:"/user/checkout",element:this.state.auth||v()?r.a.createElement(K,null):r.a.createElement(E.a,{to:"/login"})}),r.a.createElement(E.b,{path:"/user/payment",element:this.state.auth||v()?r.a.createElement(X,null):r.a.createElement(E.a,{to:"/login"})}),r.a.createElement(E.b,{path:"/admin/dashboard",element:!this.state.auth&&!v()||"admin"!==this.state.role&&"admin"!==N().role?r.a.createElement(E.a,{to:"/"}):r.a.createElement(J,null)}),r.a.createElement(E.b,{path:"/admin/create/category",element:!this.state.auth&&!v()||"admin"!==this.state.role&&"admin"!==N().role?r.a.createElement(E.a,{to:"/"}):r.a.createElement(G,null)}),r.a.createElement(E.b,{path:"/admin/create/product",element:!this.state.auth&&!v()||"admin"!==this.state.role&&"admin"!==N().role?r.a.createElement(E.a,{to:"/"}):r.a.createElement(M,null)}),r.a.createElement(E.b,{path:"/*",element:r.a.createElement(E.a,{to:"/"})}),r.a.createElement(E.b,{path:"/product/:id",element:r.a.createElement(Q,null)}))}}]),t}(n.Component);a(52);var $=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.a,null,r.a.createElement(Z,null)))},ee=function(e){e&&e instanceof Function&&a.e(1).then(a.bind(null,63)).then(function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),c(e),l(e)})};a(54);l.a.createRoot(document.getElementById("root")).render(r.a.createElement($,null)),ee()}},[[36,3,2]]]);
//# sourceMappingURL=main.e1af61cb.chunk.js.map