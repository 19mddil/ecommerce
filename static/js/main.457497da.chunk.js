(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,a,t){e.exports=t(56)},44:function(e,a,t){},52:function(e,a,t){},56:function(e,a,t){"use strict";t.r(a);var n=t(2),r=t.n(n),c=t(29),l=t.n(c),o=(t(44),t(9)),s=t(10),m=t(11),i=t(18),u=t(15),d=t(17),E=t(0),b=t(6),p=t(13),g=t(12),f=t(27),h=function(e,a){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),a())},v=function(){if("undefined"===typeof window)return!1;if(localStorage.getItem("jwt")){var e=Object(f.a)(JSON.parse(localStorage.getItem("jwt"))).exp;return(new Date).getTime()<1e3*e||(localStorage.removeItem("jwt"),!1)}return!1},N=function(){var e=JSON.parse(localStorage.getItem("jwt")),a=Object(f.a)(e);return Object(g.a)({},a,{token:e})},y=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).navToggler=function(){t.setState({isNavOpen:!t.state.isNavOpen})},t.state={isNavOpen:!1},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(p.h,{dark:!0,color:"dark",expand:"sm"},r.a.createElement(p.i,{href:"https://19mddil.github.io/ecommerce"},"Ecommerce-MERN-"),r.a.createElement(p.j,{onClick:this.navToggler}),r.a.createElement(p.c,{isOpen:this.state.isNavOpen,navbar:!0},r.a.createElement(p.f,{className:"mr-auto",navbar:!0},r.a.createElement(p.g,null,r.a.createElement(o.b,{to:"/",className:"nav-link active"}," Home")),!v()&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p.g,null,r.a.createElement(o.b,{to:"/login",className:"nav-link"}," Login")),r.a.createElement(p.g,null,r.a.createElement(o.b,{to:"/register",className:"nav-link"}," Register"))),v()&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p.g,null,r.a.createElement(o.b,{to:"/logout",className:"nav-link",onClick:function(){"undefined"!==typeof window&&localStorage.removeItem("jwt")}},"Logout")),r.a.createElement(p.g,null,r.a.createElement(o.b,{to:"/user/dashboard",className:"nav-link"},"User Dashboard"))),v()&&"admin"===N().role&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p.g,null,r.a.createElement(o.b,{to:"/admin/dashboard",className:"nav-link"},"Admin Dashboard")))))))}}]),a}(n.Component),O=function(e){var a=e.title,t=void 0===a?"Title":a,c=e.className,l=e.children;return Object(n.useEffect)(function(){document.title=t},[]),r.a.createElement("div",null,r.a.createElement("div",{className:"mb-3"},r.a.createElement(y,null)),r.a.createElement("div",{className:c},r.a.createElement("div",null,l)))},j="https://ecommerceapi.freelancebangla.com/api",w=t(64),S=function(e,a){if(e)return r.a.createElement("div",{className:"alert alert-danger"},a)},C=function(e,a){if(e)return r.a.createElement("div",{className:"alert alert-success"},a)},k=function(e){if(e)return r.a.createElement("div",{className:"alert alert-info"},"Loading.....")},x=t(14),F=function(e){var a=e.categories,t=Object(n.useState)([]),c=Object(b.a)(t,2),l=c[0],o=c[1],s=Object(x.a)(l);return a.map(function(e){return r.a.createElement("li",{className:"list-unstyled",key:e._id},r.a.createElement("input",{type:"checkbox",className:"form-check-input",onChange:(a=e._id,function(){var e=l.indexOf(a);-1===e?s.push(a):s.splice(e,1),o(s)}),value:-1===l.indexOf(e._id)}),r.a.createElement("label",{className:"form-check-label"},e.name));var a})},q=function(e){var a=e.product;return r.a.createElement("div",{className:"col-md-3 col-sm-4 col-xs-12"},r.a.createElement("div",{className:"card"},r.a.createElement("img",{src:"".concat(j,"/product/photo/").concat(a._id),alt:a.name,style:{height:250,objectFit:"cover",objectPosition:"0px 0px"},className:"card-img-top"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{style:{minHeight:"3em"}},r.a.createElement("p",{style:{display:"block",textOverflow:"ellipsis",wordWrap:"break-word",overflow:"hidden",maxHeight:"2em",lineHeight:"1em"}},a.name)),r.a.createElement("span",{style:{fontSize:20}},"\u09f3"),a.price,r.a.createElement("p",null,a.quantity?r.a.createElement("span",{class:"badge badge-primary text-primary"},"In Stock"):r.a.createElement("span",{class:"badge badge-pill badge-danger text-danger"},"Out of Stock")),r.a.createElement(o.b,{to:"/product/".concat(a._id)},r.a.createElement("button",{className:"btn btn-outline-warning btn-sm"},"View Product")),a.quantity?r.a.createElement(r.a.Fragment,null,"\xa0",r.a.createElement("button",{className:"btn btn-outline-primary btn-sm"},"Add to Cart")):"")))},D=function(){var e=Object(n.useState)([]),a=Object(b.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(!1),o=Object(b.a)(l,2),s=o[0],m=o[1],i=Object(n.useState)(!1),u=Object(b.a)(i,2),d=u[0],E=(u[1],Object(n.useState)(30)),p=Object(b.a)(E,2),g=p[0],f=(p[1],Object(n.useState)("asc")),h=Object(b.a)(f,2),v=h[0],N=(h[1],Object(n.useState)("price")),y=Object(b.a)(N,2),k=y[0],x=(y[1],Object(n.useState)([])),D=Object(b.a)(x,2),P=D[0],A=D[1];Object(n.useEffect)(function(){(function(e,a,t){return w.a.get("".concat(j,"/product?sortBy=").concat(e,"&order=").concat(a,"&limit=").concat(t))})(k,v,g).then(function(e){return c(e.data)}).catch(function(e){return m("Failed to load products")}),w.a.get("".concat(j,"/category")).then(function(e){return A(e.data)}).catch(function(e){return m("Failed to load categories!")})},[]);return r.a.createElement("div",null,r.a.createElement(O,{title:"Home Page",className:"container"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("h5",null,"Filter by Category:"),r.a.createElement(F,{categories:P}),r.a.createElement("ul",null)))),r.a.createElement("div",{style:{width:"100%"}},S(s,s),C(d,"added to cart")),r.a.createElement("div",{className:"row"},t&&t.map(function(e){return r.a.createElement(q,{product:e,key:e._id})}))))},P=t(8),A=function(e){return w.a.post("".concat(j,"/user/signin"),e,{headers:{"Content-Type":"application/json"}})},I=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(c)))).state={email:"",password:"",error:!1,loading:!1,disabled:!1,redirect:!1,success:!1},t.handleChange=function(e){t.setState(Object(P.a)({error:!1},e.target.name,e.target.value))},t.handleSubmit=function(e){e.preventDefault(),t.setState({error:!1,loading:!0,disabled:!0});var a=t.state.email,n=t.state.password;A({email:a,password:n}).then(function(e){h(e.data.token,function(){t.setState({email:"",password:"",success:!0,disabled:!1,loading:!1,redirect:!0,error:!1})})}).catch(function(e){var a="Something went wrong";e.response&&(a=e.response.data),t.setState({error:a,disabled:!1,loading:!1})})},t.redirectUser=function(){if(t.state.redirect)return r.a.createElement(E.a,{to:"/"})},t.signInForm=function(){return r.a.createElement("form",{onSubmit:t.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email:"),r.a.createElement("input",{name:"email",type:"email",className:"form-control",value:t.state.email,required:!0,onChange:t.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password:"),r.a.createElement("input",{name:"password",type:"password",className:"form-control",value:t.state.redirectpassword,required:!0,onChange:t.handleChange})),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary",disabled:t.state.disabled},"Login"))},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(O,{title:"Login",className:"container col-md-8 offset-md-2"},this.redirectUser(),k(this.state.loading),S(this.state.error,this.state.error),r.a.createElement("h3",null,"Login Here,"),r.a.createElement("hr",null),this.signInForm(),r.a.createElement("hr",null))}}]),a}(n.Component),L=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:!1,loading:!1,disabled:!1,success:!1}),a=Object(b.a)(e,2),t=a[0],c=a[1],l=t.name,s=t.email,m=t.password,i=t.success,u=t.error,d=t.loading,E=t.disabled,p=function(e){c(Object(g.a)({},t,Object(P.a)({error:!1},e.target.name,e.target.value)))},f=function(e){var a;e.preventDefault(),c(Object(g.a)({},t,{error:!1,loading:!0,disabled:!0})),(a={name:l,email:s,password:m},w.a.post("".concat(j,"/user/signup"),a,{headers:{"Content-Type":"application/json"}})).then(function(e){c({name:"",email:"",password:"",success:!0,disabled:!1,loading:!1})}).catch(function(e){var a="Something went wrong";e.response&&(a=e.response.data),c(Object(g.a)({},t,{error:a,disabled:!1,loading:!1}))})};return r.a.createElement(O,{title:"Register",className:"container col-md-8 offset-md-2"},function(){if(i)return r.a.createElement("div",{className:"alert alert-primary"},"New account Created. Please ",r.a.createElement(o.b,{to:"/login"},"Login"))}(),k(d),S(u,u),r.a.createElement("h3",null,"Register Here,"),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:f},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name:"),r.a.createElement("input",{type:"text",name:"name",className:"form-control",value:l,required:!0,onChange:p})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email:"),r.a.createElement("input",{type:"email",name:"email",className:"form-control",value:s,required:!0,onChange:p})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password:"),r.a.createElement("input",{type:"password",name:"password",className:"form-control",value:m,required:!0,onChange:p})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:E},"Create Account")),r.a.createElement("hr",null))},H=function(){var e=N(),a=e.name,t=e.email,n=e.role;return r.a.createElement(O,{title:"Dashboard",className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement(function(){return r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header"},"User Links"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(o.b,{className:"nav-link",to:"#"},"My Cart")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(o.b,{className:"nav-link",to:"#"},"Update Profile"))))},null)),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(function(){return r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header"},"User Information"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},a),r.a.createElement("li",{className:"list-group-item"},t),r.a.createElement("li",{className:"list-group-item"},n)))},null),r.a.createElement(function(){return r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header"},"Purchase History"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},"History")))},null))))},T=function(){var e=N(),a=e.name,t=e.email,n=e.role;return r.a.createElement("div",null,r.a.createElement(O,{title:"Dashboard",className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement(p.a,null,r.a.createElement(p.b,null,r.a.createElement("h4",null,"User Links")),r.a.createElement(p.d,{flush:!0},r.a.createElement(p.e,null,r.a.createElement(o.b,{to:"/admin/create/category",className:"nav-link"}," Create Category")),r.a.createElement(p.e,null,r.a.createElement(o.b,{className:"nav-link",to:"/admin/create/product"},"Create Product"))))),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header"},"User Information"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},a),r.a.createElement("li",{className:"list-group-item"},t),r.a.createElement("li",{className:"list-group-item"},n)))))))},_=function(){var e=Object(n.useState)({name:"",error:!1,success:!1,loading:!1}),a=Object(b.a)(e,2),t=a[0],c=a[1],l=t.name,s=t.error,m=t.success,i=t.loading,u=function(e){e.preventDefault(),c(Object(g.a)({},t,{loading:!0,error:!1,success:!1})),function(e,a){return w.a.post("".concat(j,"/category"),a,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})}(N().token,{name:l}).then(function(e){c(Object(g.a)({},t,{error:!1,success:!0,loading:!1}))}).catch(function(e){e.response?(c(Object(g.a)({},t,{success:!1,error:e.response.data,loading:!1})),console.log(" err.res here")):(console.log("here"),c(Object(g.a)({},t,{success:!1,error:"Something went wrong",loading:!1})))})},d=function(e){var a;c(Object(g.a)({},t,(a={},Object(P.a)(a,e.target.name,e.target.value),Object(P.a)(a,"error",!1),a)))};return r.a.createElement(O,{title:"Add a new category",description:"Ready to add a new category?"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},k(i),S(s,s),C(m,"Category Created!"),r.a.createElement("form",{onSubmit:u},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{name:"name",type:"text",onChange:d,value:l,autoFocus:!0,required:!0,className:"form-control"})),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary"},"Create Category")),r.a.createElement("div",{className:"mt-5"},r.a.createElement(o.b,{to:"/admin/dashboard",className:"text-warning"},"Go to Dashboard")))))},U=function(){var e=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",quantity:"",loading:!1,error:!1,success:!1,disabled:!1,formData:""}),a=Object(b.a)(e,2),t=a[0],c=a[1],l=t.name,s=t.description,m=t.price,i=t.category,u=t.categories,d=t.quantity,E=t.loading,p=t.error,f=t.success,h=t.formData,v=t.disabled;Object(n.useEffect)(function(){w.a.get("".concat(j,"/category")).then(function(e){c(Object(g.a)({},t,{categories:e.data,formData:new FormData}))}).catch(function(e){c(Object(g.a)({},t,{error:"Failed to load categories",formData:new FormData}))})},[]);var y=function(e){var a,n="photo"===e.target.name?e.target.files[0]:e.target.value;h.set(e.target.name,n),c(Object(g.a)({},t,(a={},Object(P.a)(a,e.target.name,n),Object(P.a)(a,"error",!1),Object(P.a)(a,"success",!1),a)))},x=function(e){e.preventDefault(),c(Object(g.a)({},t,{error:!1,loading:!0,disabled:!0,success:!1})),function(e,a){return console.log(a),w.a.post("".concat(j,"/product"),a,{headers:{Authorization:"Bearer ".concat(e)}})}(N().token,h).then(function(e){c(Object(g.a)({},t,{name:"",description:"",price:"",category:"",quantity:"",loading:!1,disabled:!1,success:!0,error:!1}))}).catch(function(e){var a="Something went wrong";e.response&&(a=e.response.data),c(Object(g.a)({},t,{error:a,loading:!1,success:!1,disabled:!1}))})};return r.a.createElement(O,{title:"Add a new product"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},S(p,p),k(E),C(f,"Product Added Successfully!"),r.a.createElement("form",{className:"mb-3",onSubmit:x},r.a.createElement("h4",null,"Photo:"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"btn btn-secondary"},r.a.createElement("input",{type:"file",name:"photo",onChange:y,accept:"image/*",required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name:"),r.a.createElement("input",{name:"name",onChange:y,type:"text",className:"form-control",value:l,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Description:"),r.a.createElement("textarea",{name:"description",onChange:y,className:"form-control",value:s,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Price:"),r.a.createElement("input",{name:"price",onChange:y,className:"form-control",type:"number",value:m,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Quantity:"),r.a.createElement("input",{name:"quantity",onChange:y,className:"form-control",type:"number",value:d,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Category:"),r.a.createElement("select",{name:"category",value:i,onChange:y,className:"form-control",required:!0},r.a.createElement("option",{value:""},"choose a category"),u&&u.map(function(e){return r.a.createElement("option",{value:e._id,key:e._id},e.name)}))),r.a.createElement("button",{className:"btn btn-outline-primary",type:"submit",disabled:v},"Create Product")),r.a.createElement("div",{className:"mt-5"},r.a.createElement(o.b,{to:"/admin/dashboard",className:"text-warning"},"Go to Dashboard")))))},R=function(e){var a=Object(n.useState)({}),t=Object(b.a)(a,2),c=t[0],l=t[1],s=Object(n.useState)(!1),m=Object(b.a)(s,2),i=m[0],u=m[1],d=Object(n.useState)(!1),p=Object(b.a)(d,2),g=p[0],f=(p[1],Object(E.o)().id);return Object(n.useEffect)(function(){(function(e){return w.a.get("".concat(j,"/product/").concat(e))})(f).then(function(e){return l(e.data)}).catch(function(e){return u("Failed to load products")})},[]),r.a.createElement(O,{title:"Product Page"},r.a.createElement("nav",{"aria-label":"breadcrumb"},r.a.createElement("ol",{class:"breadcrumb"},r.a.createElement("li",{class:"breadcrumb-item"},r.a.createElement(o.b,{to:"/"},"Home")),r.a.createElement("li",{class:"breadcrumb-item"},r.a.createElement(o.b,{to:"/product"},"Product")),r.a.createElement("li",{class:"breadcrumb-item active","aria-current":"page"},c.category?c.category.name:""))),r.a.createElement("div",null,C(g,"Item Added to Cart!"),S(i,i)),r.a.createElement("div",{className:"row container"},r.a.createElement("div",{className:"col-6"},r.a.createElement("img",{src:"".concat(j,"/product/photo/").concat(c._id),alt:c.name,width:"100%"})),r.a.createElement("div",{className:"col-6"},r.a.createElement("h3",null,c.name),r.a.createElement("span",{style:{fontSize:20}},"\u09f3"),c.price,r.a.createElement("p",null,c.quantity?r.a.createElement("span",{class:"badge badge-pill badge-primary text-primary"},"In Stock"):r.a.createElement("span",{class:"badge badge-pill badge-danger"},"Out of Stock")),r.a.createElement("p",null,c.description),c.quantity?r.a.createElement(r.a.Fragment,null,"\xa0",r.a.createElement("button",{className:"btn btn-outline-primary btn-md"},"Add to Cart")):"")))},B=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={auth:!1,role:""},t.useAuth=function(){if(t.setState({auth:v()}),v()){var e=N().role;t.setState({role:e})}},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return this.useAuth(),r.a.createElement(E.d,null,r.a.createElement(E.b,{path:"/",element:r.a.createElement(D,null)}),r.a.createElement(E.b,{path:"/login",element:this.state.auth||v()?r.a.createElement(D,null):r.a.createElement(I,null)}),r.a.createElement(E.b,{path:"/register",element:this.state.auth||v()?r.a.createElement(D,null):r.a.createElement(L,null)}),r.a.createElement(E.b,{path:"/logout",element:r.a.createElement(E.a,{to:"/login"})}),r.a.createElement(E.b,{path:"/user/dashboard",element:this.state.auth||v()?r.a.createElement(H,null):r.a.createElement(E.a,{to:"/login"})}),r.a.createElement(E.b,{path:"/admin/dashboard",element:!this.state.auth&&!v()||"admin"!==this.state.role&&"admin"!==N().role?r.a.createElement(E.a,{to:"/"}):r.a.createElement(T,null)}),r.a.createElement(E.b,{path:"/admin/create/category",element:!this.state.auth&&!v()||"admin"!==this.state.role&&"admin"!==N().role?r.a.createElement(E.a,{to:"/"}):r.a.createElement(_,null)}),r.a.createElement(E.b,{path:"/admin/create/product",element:!this.state.auth&&!v()||"admin"!==this.state.role&&"admin"!==N().role?r.a.createElement(E.a,{to:"/"}):r.a.createElement(U,null)}),r.a.createElement(E.b,{path:"/*",element:r.a.createElement(E.a,{to:"/"})}),r.a.createElement(E.b,{path:"/product/:id",element:r.a.createElement(R,null)}))}}]),a}(n.Component);t(52);var J=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null,r.a.createElement(B,null))))},z=function(e){e&&e instanceof Function&&t.e(1).then(t.bind(null,63)).then(function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,c=a.getLCP,l=a.getTTFB;t(e),n(e),r(e),c(e),l(e)})};t(54);l.a.createRoot(document.getElementById("root")).render(r.a.createElement(J,null)),z()}},[[36,3,2]]]);
//# sourceMappingURL=main.457497da.chunk.js.map